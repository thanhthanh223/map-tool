<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Tô màu phường/xã với vùng biên OSM</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>
  <div id="map" style="height: 100vh;"></div>
  <script>
    // Chứa dữ liệu boundary thực tế
    const communeBoundary = [
      [20.6138317, 106.4911370],
      [20.6288076, 106.4534461],
      [20.6183543, 106.4567335],
      [20.5994217, 106.4703443],
      [20.6163037, 106.4947231],
      [20.6160760, 106.4959401],
      [20.6201809, 106.4500743],
      [20.6252433, 106.4515484],
      [20.6408065, 106.4537629],
      [20.6105606, 106.4680818],
      [20.6196732, 106.4507583],
      [20.5989162, 106.4706045],
      [20.6298574, 106.4540036],
      [20.6169586, 106.4612420],
      [20.6422750, 106.4523709],
      [20.6158078, 106.4631858],
      [20.6434766, 106.4510385],
      [20.6502552, 106.4452134],
      [20.6087916, 106.4689371],
      [20.6393552, 106.4547746],
      [20.6389320, 106.4549728],
      [20.5986879, 106.4708993],
      [20.6164679, 106.4621599],
      [20.6134338, 106.4909606],
      [20.6024838, 106.4846646],
      [20.6185994, 106.4549068],
      [20.6306955, 106.4543183],
      [20.6246084, 106.4512516],
      [20.6218231, 106.4500917],
      [20.6080636, 106.4692070],
      [20.6385053, 106.4550184],
      [20.6164954, 106.4926968],
      [20.6150632, 106.4643377],
      [20.6172293, 106.4605761],
      [20.6056004, 106.4697564],
      [20.6095547, 106.4896911],
      [20.6350382, 106.4550818],
      [20.6003157, 106.4826895],
      [20.6381617, 106.4550719],
      [20.6125055, 106.4906785],
      [20.6156206, 106.5002285],
      [20.6190389, 106.4527831],
      [20.6429011, 106.4517048],
      [20.5982975, 106.4780421],
      [20.6036345, 106.4855956],
      [20.6135822, 106.4660386],
      [20.6165554, 106.4938437],
      [20.6067855, 106.4695403],
      [20.6354614, 106.4550998],
      [20.6273598, 106.4526816],
      [20.6027309, 106.4698919],
      [20.6375184, 106.4550902],
      [20.6160279, 106.4922635],
      [20.6281811, 106.4531042],
      [20.6490111, 106.4461949],
      [20.6012293, 106.4699193],
      [20.6063283, 106.4696303],
      [20.6359947, 106.4551267],
      [20.5980357, 106.4721390],
      [20.5982649, 106.4774354],
      [20.6040175, 106.4698917],
      [20.6154788, 106.5020628],
      [20.6141300, 106.4912780],
      [20.6189374, 106.4533410],
      [20.6159801, 106.4967557],
      [20.6042733, 106.4861120],
      [20.6198594, 106.4504342],
      [20.6167387, 106.4616559],
      [20.5980525, 106.4751731],
      [20.6184049, 106.4561216],
      [20.6152285, 106.4641322],
      [20.6474670, 106.4473246],
      [20.6214675, 106.4499838],
      [20.6161463, 106.4626458],
      [20.6445174, 106.4499673],
      [20.6209935, 106.4499120],
      [20.6093502, 106.4687210],
      [20.6166392, 106.4931173],
      [20.5990664, 106.4812439],
      [20.6187853, 106.4541148],
      [20.6333973, 106.4550198],
      [20.6087660, 106.4893000],
      [20.6103835, 106.4899732],
      [20.6033413, 106.4853586],
      [20.6074034, 106.4694052],
      [20.6522899, 106.4437618],
      [20.6119087, 106.4904669],
      [20.6145280, 106.4914895],
      [20.6177792, 106.4590551],
      [20.6010670, 106.4833958],
      [20.6205872, 106.4499301],
      [20.6501110, 106.4453271],
      [20.6047879, 106.4698466],
      [20.6294002, 106.4538058],
      [20.6462100, 106.4484907],
      [20.5987887, 106.4807127],
      [20.6001066, 106.4702229],
      [20.6017490, 106.4699102],
      [20.6081345, 106.4889661],
      [20.5994550, 106.4818634],
      [20.5980033, 106.4729886],
      [20.6241004, 106.4509998],
      [20.6321685, 106.4547318],
      [20.6511691, 106.4445471],
      [20.6155246, 106.5015984],
      [20.5985110, 106.4799455],
      [20.6453806, 106.4491570],
      [20.6343270, 106.4550642],
      [20.6484695, 106.4466450],
      [20.6193856, 106.4514422],
      [20.6158124, 106.4976222],
      [20.6269873, 106.4524477],
      [20.6182698, 106.4573094],
      [20.6157044, 106.4989668],
      [20.6069996, 106.4881640],
      [20.6150671, 106.4916964],
      [20.6163996, 106.4942388],
      [20.6166273, 106.4935251],
      [20.6224242, 106.4503165],
      [20.6314913, 106.4545701],
      [20.6145469, 106.4649407],
      [20.5999270, 106.4823061],
      [20.6163636, 106.4925183],
      [20.6403201, 106.4541625],
      [20.6415640, 106.4530551],
      [20.5983442, 106.4790013],
      [20.6258359, 106.4517822],
      [20.6077388, 106.4886628],
      [20.6111792, 106.4901848],
      [20.6326595, 106.4548577],
      [20.6397106, 106.4545405],
      [20.6160365, 106.4962760],
      [20.6367227, 106.4551084],
      [20.6232538, 106.4506762],
      [20.6006211, 106.4829847],
      [20.6125496, 106.4668848],
      [20.6114577, 106.4675777],
      [20.6180499, 106.4582453],
      [20.6140730, 106.4654987],
      [20.5981335, 106.4717056],
      [20.6156443, 106.4919832],
      [20.6192080, 106.4520811],
      [20.6120333, 106.4672897],
      [20.6155846, 106.5005853],
      [20.6154525, 106.4638158],
      [20.6130913, 106.4664527],
      [20.6264455, 106.4521418],
      [20.6683531, 106.4561563],
      [20.6696494, 106.4625465],
      [20.6683090, 106.4577931],
      [20.6607357, 106.4357668],
      [20.6523426, 106.4437294],
      [20.6598953, 106.4372493],
      [20.6584220, 106.4387825],
      [20.6571656, 106.4403527],
      [20.6564789, 106.4409393],
      [20.6538369, 106.4427673],
      [20.6277578, 106.5071923],
      [20.6223041, 106.5048194],
      [20.6192138, 106.5034786],
      [20.6166096, 106.5023388],
      [20.6158723, 106.5021377],
      [20.6296874, 106.5073897],
      [20.6311903, 106.5033897],
      [20.6319731, 106.5022847],
      [20.6400816, 106.5071911],
      [20.6442854, 106.5095123],
      [20.6358310, 106.5046191],
      [20.6702396, 106.4646651],
      [20.6694760, 106.4651012],
      [20.6694478, 106.4652167],
      [20.6685774, 106.4653578],
      [20.6687515, 106.4660507],
      [20.6676950, 106.4666218],
      [20.6665938, 106.4678759],
      [20.6657506, 106.4687311],
      [20.6651494, 106.4698695],
      [20.6617802, 106.4680254],
      [20.6523890, 106.4436995],
      [20.6607338, 106.4697701],
      [20.6602724, 106.4705098],
      [20.6572541, 106.4815634],
      [20.6583990, 106.4829351],
      [20.6586733, 106.4834480],
      [20.6588104, 106.4841389],
      [20.6587320, 106.4846519],
      [20.6575666, 106.4881393],
      [20.6568647, 106.4881048],
      [20.6551548, 106.4883031],
      [20.6552199, 106.4905037],
      [20.6524955, 106.4909099],
      [20.6501069, 106.4967523],
      [20.6523105, 106.4978111],
      [20.6533587, 106.4984456],
      [20.6514442, 106.5012280],
      [20.6626177, 106.4396485],
      [20.6630327, 106.4391041]
    ];

    // Tính tâm để đặt view vào giữa vùng
    function getCenter(bounds) {
      let sumLat = 0, sumLng = 0;
      bounds.forEach(point => {
        sumLat += point[0];
        sumLng += point[1];
      });
      return [sumLat / bounds.length, sumLng / bounds.length];
    }

    // Khởi tạo bản đồ Leaflet và layer OSM
    const map = L.map('map').setView(getCenter(communeBoundary), 15);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19
    }).addTo(map);

    // Vẽ polygon TÔ TOÀN BỘ 1 MÀU XANH LÁ
    const polygon = L.polygon(communeBoundary, {
      color: '#2e7d32',          // viền xanh lá đậm
      fillColor: '#4caf50',      // màu xanh lá cây đẹp
      fillOpacity: 0.7,          // hơi trong suốt để thấy map bên dưới
      weight: 3                  // viền dày hơn
    }).addTo(map);

    map.fitBounds(polygon.getBounds());

    polygon.bindTooltip('Phường/Xã OSM', {
      direction: 'center',
      permanent: true,
      className: 'polygon-label'
    });
  </script>
  <style>
    .polygon-label {
      font-weight: bold;
      font-size: 1em;
      color: #0d47a1;
      background: rgba(255,255,255,0.9);
      border-radius: 4px;
      padding: 3px 8px;
      border: 1px solid #1976d2;
      box-shadow: 0 1px 6px #aaa;
    }
  </style>
</body>